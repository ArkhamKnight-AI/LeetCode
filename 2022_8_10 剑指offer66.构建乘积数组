class Solution {
public:
    vector<int> multiply(const vector<int>& A) {
	if (A.empty()) return {};

	int n = A.size();
	vector<int> res(n, 1);
	
  //正着来一遍
	for (int i = 0, p = 1; i < n; i++) {
		res[i] = p;
		p *= A[i];
	}

  //反着来一遍
	for (int i = n - 1, p = 1; i >= 0; i--) {
		res[i] *= p;
		p *= A[i];
	}

	return res;
}
};
